# Template file for 'river'
pkgname=river
version=0.3.4dev
revision=1
archs="~i686* ~armv6l* ~armv7l*"
build_style=zig-build
configure_args="$(vopt_if xwayland -Dxwayland) -Dpie"
hostmakedepends="pkg-config wayland-devel scdoc"
makedepends="wlroots0.17-devel libevdev-devel pixman-devel
 wayland-protocols libxkbcommon-devel wayland-devel"
depends="$(vopt_if xwayland xorg-server-xwayland)"
short_desc="Dynamic tiling Wayland compositor"
maintainer="shadowmax31 <ety_95@protonmail.com>"
license="GPL-3.0-only"
homepage="https://github.com/shadowmax31/river"

git_src="https://github.com/shadowmax31/river"
commit_rev="07aa96a0e7ca7b8d1ab2deb30007f92f847e1296"

build_options="xwayland"
build_options_default="xwayland"
desc_option_xwayland="Enable Xwayland support"

do_fetch() {
	git clone ${git_src} $wrksrc
	cd $wrksrc
	git reset --hard ${commit_rev}
	git submodule update --init
}

post_install() {
	vinstall contrib/river.desktop 644 usr/share/wayland-sessions
	vsconf example/init
}
